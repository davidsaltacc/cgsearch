<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:li="using:LoadingIndicators.Avalonia"
		xmlns:local="clr-namespace:CGSearchUI"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
		MinWidth="400" MinHeight="300"
        x:Class="CGSearchUI.MainWindow"
        Title="CGSearch UI"
		ExtendClientAreaToDecorationsHint="True"
		TransparencyLevelHint="AcrylicBlur"
        Background="Transparent"
		WindowStartupLocation="CenterScreen">

	<Grid RowDefinitions="30,*" RenderOptions.TextRenderingMode="Antialias">

		<Grid ColumnDefinitions="Auto,*" IsHitTestVisible="False" Background="#202020">
			<Image x:Name="TitleBarIcon" Grid.Column="0" VerticalAlignment="Center" Width="18" Margin="5,0,5,0" RenderOptions.BitmapInterpolationMode="HighQuality" />
			<TextBlock Grid.Column="1" VerticalAlignment="Center" FontSize="12">CGSearch UI</TextBlock>
		</Grid>

		<DockPanel Grid.Row="1" Background="#6f101010">

			<DockPanel DockPanel.Dock="Top" Margin="5" MaxHeight="32">
				<StackPanel DockPanel.Dock="Right" Orientation="Horizontal">
					<li:LoadingIndicator IsActive="{Binding IsSearching}" Mode="Arcs" SpeedRatio="1.25" />
					<Button IsEnabled="{Binding !IsSearching}" Content="Search" Cursor="Hand" Click="SearchClicked" />
					<Button IsEnabled="{Binding IsSearching}" Content="Cancel" Cursor="Hand" Click="CancelClicked" />
					<Button Content="Settings" Cursor="Hand" Click="SettingsClicked" />
				</StackPanel>
				<TextBox x:Name="SearchBar" DockPanel.Dock="Left" Watermark="Search..." VerticalAlignment="Center" Margin="0,0,5,0"/>
			</DockPanel>
			
			<DataGrid
				x:Name="ResultsDataGrid"
				IsReadOnly="True"
				CanUserReorderColumns="True"
				CanUserResizeColumns="True"
				CanUserSortColumns="True"
				GridLinesVisibility="All"
				ItemsSource="{Binding Results}"
				VerticalScrollBarVisibility="Auto"
				HorizontalScrollBarVisibility="Auto">

				<DataGrid.Columns>
					<DataGridTextColumn Header="Game Title" Binding="{Binding RepackTitle}" Width="300"/>
					<DataGridTemplateColumn Header="Provider" CanUserSort="true" SortMemberPath="Provider">
						<DataGridTemplateColumn.CellTemplate >
							<DataTemplate DataType="local:EngineResultLink">
								<TextBlock Text="{Binding Provider}" VerticalAlignment="Center" PointerPressed="ProviderCell_PointerPressed" TextDecorations="Underline" Background="Transparent" Cursor="Hand" />
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
					<DataGridTextColumn Header="Link Name" Binding="{Binding LinkName}" Width="300" />
					<DataGridTemplateColumn Header="Link URL" Width="200" CanUserSort="true" SortMemberPath="LinkUrl">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate DataType="local:EngineResultLink">
								<TextBlock Text="{Binding LinkUrl}" VerticalAlignment="Center" PointerPressed="LinkCell_PointerPressed" TextDecorations="Underline" Foreground="#cfcfff" Background="Transparent" Cursor="Hand">
									<TextBlock.ContextMenu>
										<ContextMenu>
											<MenuItem Header="Open" Click="LinkUrlContextMenu_Open_Clicked" />
											<MenuItem Header="Copy" Click="LinkUrlContextMenu_Copy_Clicked" />
										</ContextMenu>
									</TextBlock.ContextMenu>
								</TextBlock>
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
					<DataGridTextColumn Header="Type" Binding="{Binding LinkType}"/>
					<DataGridTemplateColumn Header="Repack Page" Width="200" CanUserSort="true" SortMemberPath="RepackPage">
						<DataGridTemplateColumn.CellTemplate>
							<DataTemplate DataType="local:EngineResultLink">
								<TextBlock Text="{Binding RepackPage}" VerticalAlignment="Center" PointerPressed="RepackPageCell_PointerPressed" TextDecorations="Underline" Foreground="#cfcfff" Background="Transparent" Cursor="Hand">
									<TextBlock.ContextMenu>
										<ContextMenu>
											<MenuItem Header="Open" Click="RepackPageContextMenu_Open_Clicked" />
											<MenuItem Header="Copy" Click="RepackPageContextMenu_Copy_Clicked" />
										</ContextMenu>
									</TextBlock.ContextMenu>
								</TextBlock>
							</DataTemplate>
						</DataGridTemplateColumn.CellTemplate>
					</DataGridTemplateColumn>
					<DataGridTextColumn Header="Result Confidence" Binding="{Binding Score}"/>
				</DataGrid.Columns>

			</DataGrid>
		</DockPanel>
	</Grid>
	
</Window>
